---
title: stack build
date: 2018/07/30
---

## 並列ビルドについて

`stack` では自動的にビルドが並列化される (現在のCPUのコア数を自動的に設定する) ため、明示的に `-j` オプションを渡す必要はありません。(むしろ、現状は間違ったコア数を渡してしまうとパフォーマスに悪影響を及ぼすバグがあるため、現状は**非推奨**です。)

並列化オプションとして `-jN` が提供されていますが、以下のようにコア数を**抑制したい**場合にのみ、利用した方が良いでしょう。(`-j` はエラーになります)

### 並列化してビルド

```shell
$ stack build
```

### コア数1でビルド

```shell
$ stack build -j1
```

### stack.yaml に設定する方法

```yaml
# stack.yaml
jobs: 1
```