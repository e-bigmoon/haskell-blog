---
title: なぜ stack を使うのか？
date: 2018/01/07
prev: ./index.html
next: ./stackage.html
---

## Haskell 開発

`stack` を使わずに `Haskell` で本格的なアプリケーションを開発することはとても大変です。

仮に開発ができたとしても、規模が大きくなるにつれ、開発者しかビルドできなくなってしまいます。

`stack` が登場する以前の `Haskell` 界隈では、この問題は特に珍しいことではありませんでした。(現在では `stack` 以外にも `nix`, `cabal sandbox`, `Docker` などを使う方法もあると思います。)

## cabal hell

特に頭を悩ませていた問題が `cabal hell` と呼ばれるパッケージ依存性の問題です。

1つのマシンで複数の `Haskell` プロジェクトをビルドしようとするだけで、全てがおかしくなっていました。(`Yesod` など比較的大きなライブラリでは、新規ユーザがビルドできる方が凄いという状況だったと記憶しています)

この問題を解決するために `stack` が現れます。2015年頃の話なので、`Haskell` の歴史からすると、比較的最近の出来事です。

`stack` は `cabal` を捨てたわけではありません。`cabal` を利用したまま、その上で `cabal hell` が起こらないような、バージョンを固定したパッケージの集合を管理するようにしました。それが [Stackage](https://www.stackage.org/) の [lts](https://www.stackage.org/lts) や [nightly](https://www.stackage.org/nightly) などの名前が付いているスナップショットです。

つまり、依存関係が壊れないように `Haskell` のライブラリ製作者、`Stackage` メンテナで頑張っています。(サポートツールも多いですが、コミュニティによる人間の作業も多いと思います)

## まとめ

これから業務なり、勉強なりで `Haskell` を使ってみようと思っている人は必ず `stack` を使いましょう。使ってみて気に入らない点が出てきた段階で、別のビルドツールに乗り換えたら良いと思います。

現在 `github` などで見かけるプロジェクトの大多数は `stack` で管理されたものになっています。
